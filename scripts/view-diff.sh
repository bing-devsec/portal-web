#!/bin/bash

# æŸ¥çœ‹æŒ‡å®šæ–‡ä»¶ä¸è¿œç¨‹ä»“åº“çš„å·®å¼‚

FILES="components/JsonTool.client.vue components/MarkdownRenderer.vue nuxt.config.ts"

echo "=========================================="
echo "  æŸ¥çœ‹æ–‡ä»¶ä¸è¿œç¨‹ä»“åº“çš„å·®å¼‚"
echo "=========================================="
echo ""

# 1. æ˜¾ç¤ºç»Ÿè®¡ä¿¡æ¯
echo "ğŸ“Š å˜æ›´ç»Ÿè®¡ï¼š"
echo "----------------------------------------"
git diff --stat origin/master -- $FILES
echo ""

# 2. è¯¢é—®æ˜¯å¦æŸ¥çœ‹è¯¦ç»†å·®å¼‚
read -p "æ˜¯å¦æŸ¥çœ‹è¯¦ç»†å·®å¼‚ï¼Ÿ(y/nï¼Œé»˜è®¤n): " -n 1 -r
echo ""

if [[ $REPLY =~ ^[Yy]$ ]]; then
    echo ""
    echo "ğŸ“ è¯¦ç»†å·®å¼‚ï¼š"
    echo "----------------------------------------"
    git diff origin/master -- $FILES
fi

echo ""
echo "=========================================="
echo "æç¤ºï¼š"
echo "  - ä½¿ç”¨ 'git diff origin/master -- <æ–‡ä»¶>' æŸ¥çœ‹å•ä¸ªæ–‡ä»¶å·®å¼‚"
echo "  - ä½¿ç”¨ 'git diff --stat origin/master' æŸ¥çœ‹æ‰€æœ‰æ–‡ä»¶ç»Ÿè®¡"
echo "  - åœ¨ IDE ä¸­ä½¿ç”¨ Git åŠŸèƒ½å¯ä»¥æ›´ç›´è§‚åœ°æŸ¥çœ‹å·®å¼‚"
echo "=========================================="

